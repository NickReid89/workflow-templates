name: Pull Request Generator
on: [workflow_dispatch]

jobs:
  publish-workflow-template:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v2
      
    - name: create branch
      run: |
        git branch
        git checkout -b NickTest main
        git branch
        git status
 
    - name: Create commits
      run: |
          git status
          git config user.name 'Nickolas Reid'
          git config user.email 'nickreid89@users.noreply.github.com'
          touch Nick.txt
          git add . 
          git status
          git commit -am "Add untracked file during workflow"
          git push -u origin NickTest
          
    - name: Create Pull Request
      # You may pin to the exact commit or the version.
      # uses: peter-evans/create-pull-request@923ad837f191474af6b1721408744feb989a4c27
      uses: peter-evans/create-pull-request@v4.0.4
      with:

        token: ${{ secrets.PR_REQUEST_TOKEN }}

        base: main
        branch: NickTest
        # Delete the `branch` when closing pull requests, and when undeleted after merging. Recommend `true`.

        delete-branch: false
        # The branch suffix type when using the alternative branching strategy.

    - name: Automatically Create Pull Requests
      # You may pin to the exact commit or the version.
      # uses: BaharaJr/create-pr@3676b6902415d419f2ec73196867460a4ed1c20b
      uses: BaharaJr/create-pr@0.0.1
      with:
        # GitHub Token
        GITHUB_TOKEN:  ${{ secrets.PR_REQUEST_TOKEN }}
        # Destination Branch
        DESTINATION_BRANCH: main
        KEYWORD: test
